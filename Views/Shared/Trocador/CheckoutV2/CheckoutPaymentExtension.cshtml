@using BTCPayServer.Plugins.Trocador
@using Newtonsoft.Json
@using Newtonsoft.Json.Linq
@inject TrocadorService TrocadorService
@{
    var storeId = ((JObject)JObject.Parse(JsonConvert.SerializeObject(Model)))["StoreId"].Value<string>();
    var settings = await TrocadorService.GetTrocadorForStore(storeId);
    if (settings?.Enabled is true)
    {
        <template id="trocador-checkout-template" :model="srvModel" :markup-percentage="@settings.AmountMarkupPercentage">
            <iframe :src="url" style="min-height:300px;width:100%;border:none" allowtransparency="true"></iframe>
        </template>

        <script src="~/Resources/js/trocadorComponent.js"></script>
    }
}
